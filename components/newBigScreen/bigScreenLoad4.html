<style>
    .aroundFlexPanel4 {
        height: 100%;
        width: 100%;
        display: flex;
        /* justify-content: space-between; */
    }

    .panel4flexs {
        display: flex;
    }

    .areaPanel4 {
        width: 32.85%;
        height: 100%;
        margin-left: 10px;
        background-color: white;
        border-radius: 5px;
        background-image: url('../../assetsInfo/images/bigScreen/tablesBj.png');
        background-size: 100% 100%;
    }

    .companyPanel4 {
        width: 100%;
        height: calc(50% - 5px);
        background-image: url('../../assetsInfo/images/bigScreen/tablesBj.png');
        background-size: 100% 100%;
    }

    .companyPanel42 {
        width: 100%;
        height: 100%;
        background-image: url('../../assetsInfo/images/bigScreen/tablesBj.png');
        background-size: 100% 100%;
    }

    .graysPanel4 {
        width: 100%;
        height: 10px;
        background-color: #F5F5F5;
    }

    .casepanel4 {
        padding: 5px 10px;
        border-bottom: 1px solid #ddd;
    }

    .logosP4 {
        width: 30px;
        height: 30px;
        margin: 0 5px;
    }

    .TitlelP4 {
        font-weight: bold;
        line-height: 30px;
    }

    .tablesP4 {
        width: 100%;
        height: calc(100% - 61px);
        /*background-color: white;*/
        padding: 0px 5px;
        box-sizing: border-box;
    }

    .tablesP42 {
        width: 100%;
        height: calc(100% - 61px);
        padding: 0px 5px;
        box-sizing: border-box;
    }

    .aroundFlexPanel4 .layui-table-header thead tr {
        background: #479EF8 !important;
        font-size: 14px;
        font-family: Source Han Sans CN;
        font-weight: bold;
        color: rgba(255, 255, 255, 1);
    }

    .aroundFlexPanel4 .layui-table-body tr:nth-child(even) {
        background-color: #ECF9FF;
    }

    .tablesP4 .layui-table-body .layui-table-cell {
        /*height: 55px;*/
        /*overflow: visible;*/
        /*text-overflow: inherit;*/
        /*white-space: normal;*/
        /*padding: 0px;*/
        /*display: table-cell;*/
        /*vertical-align: middle;*/
    }
    .tablesHeight .layui-table-body .layui-table-cell{
        height: 55px;
        overflow: visible;
        text-overflow: inherit;
        white-space: normal;
        padding: 0px;
        display: table-cell;
        vertical-align: middle;
    }
    .tablesP42 .layui-table-body .layui-table-cell {
        /*height: 55px;*/
        /*overflow: visible;*/
        /*text-overflow: inherit;*/
        /*white-space: normal;*/
        /*padding: 0px;*/
        /*display: table-cell;*/
        /*vertical-align: middle;*/
    }
</style>
<div class="aroundFlexPanel4 bigScreenLoad4">
    <div class="areaPanel4" style="margin-left: 0px">
        <div class="companyPanel4">
            <div class="panel4flexs casepanel4">
                <div><img src="../../assetsInfo/images/bigScreen/companyCase.png" class="logosP4"></div>
                <div class="TitlelP4">各公司经营情况</div>
            </div>
            <div class="tablesP4 tablesHeight">
                <table id="companyCaseP4" lay-filter="companyCaseP4"></table>
            </div>
        </div>
        <div class="graysPanel4"></div>
        <div class="companyPanel4">
            <div class="panel4flexs casepanel4">
                <div><img src="../../assetsInfo/images/bigScreen/ranking.png" class="logosP4"></div>
                <div class="TitlelP4">企业年度合同总额排行榜TOP10</div>
            </div>
            <div class="tablesP4">
                <table id="rankingP4" lay-filter="rankingP4"></table>
            </div>
        </div>
    </div>
    <div class="areaPanel4">
        <div class="companyPanel42">
            <div class="panel4flexs casepanel4">
                <div><img src="../../assetsInfo/images/bigScreen/automobile.png" class="logosP4"></div>
                <div class="TitlelP4">车企月度销量排行榜</div>
            </div>
            <div class="tablesP42">
                <table id="automobileP4" lay-filter="automobileP4"></table>
            </div>
        </div>
    </div>
    <div class="areaPanel4">
        <div class="companyPanel4">
            <div class="panel4flexs casepanel4">
                <div><img src="../../assetsInfo/images/bigScreen/department.png" class="logosP4"></div>
                <div class="TitlelP4">部门收款项排行榜TOP10</div>
            </div>
            <div class="tablesP4">
                <table id="departmentP4" lay-filter="departmentP4"></table>
            </div>
        </div>
        <div class="graysPanel4"></div>
        <div class="companyPanel4">
            <div class="panel4flexs casepanel4">
                <div><img src="../../assetsInfo/images/bigScreen/proceeds.png" class="logosP4"></div>
                <div class="TitlelP4">企业应收款排行榜TOP10</div>
            </div>
            <div class="tablesP4">
                <table id="proceedsP4" lay-filter="proceedsP4"></table>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    var tables4Height = $('.tablesP4').height();
    var tables4Height2 = $('.tablesP42').height();
    layui.use(['table', 'admin'], function () {
        var table = layui.table,
            admin = layui.admin;
        // 公司经营情况
        var companyCols = [
            [
                {
                    field: 'projectOwner',
                    title: '公司',
                    align: 'center',
                    width: '28%',
                    templet: function (d) {
                        var text = d.projectOwner;
                        return '<div title="' + text + '"><span>' + text + '</span></div>'
                    }
                },
                {
                    field: 'contractAmount',
                    title: '合同额（万元）',
                    align: 'center',
                    width: '24%',
                    templet: function (d) {
                        var text = d.contractAmount;
                        return '<div title="' + text + '"><span>' + text + '</span></div>'
                    }
                }, {
                    field: 'invoiceAmount',
                    title: '开票额（万元）',
                    align: 'center',
                    width: '24%',
                    templet: function (d) {
                        var text = d.invoiceAmount;
                        return '<div title="' + text + '"><span>' + text + '</span></div>'
                    }
                }, {
                    field: 'accountAmount',
                    title: '进账额（万元）',
                    // width: '24%',
                    align: 'center',
                    templet: function (d) {
                        var text = d.accountAmount;
                        return '<div title="' + text + '"><span>' + text + '</span></div>'
                    }
                }]
        ]
        showTableP4('companyCaseP4', '/api/industymeeting/receivableIncome/getPartBOperationStatistics', companyCols, tables4Height);
        // 年度排行
        var rankingCols = [
            [
                {
                    type: 'numbers', title: '排行'
                },
                {
                    field: 'projectOwner',
                    title: '企业',
                    align: 'center',
                    minWidth:220,
                    templet: function (d) {
                        var text = d.projectOwner;
                        return '<div title="' + text + '"><span>' + text + '</span></div>'
                    }
                }, {
                    field: 'contractAmountStr',
                    title: '金额（万元）',
                    align: 'center',
                    templet: function (d) {
                        var text = d.contractAmountStr;
                        return '<div title="' + text + '"><span>' + text + '</span></div>'
                    }
                }]
        ];
        showTableP4('rankingP4', '/api/budget/project/getProjectContractAmount', rankingCols, tables4Height)
        // 车企销量排行榜
        var automobileClos = [
            [
                {
                    type: 'numbers', title: '排行'
                },
                {
                    field: 'enterpriseName',
                    title: '企业',
                    width:"50%",
                    align: 'center',
                    templet: function (d) {
                        var text = d.enterpriseName;
                        return '<div title="' + text + '"><span>' + text + '</span></div>'
                    }
                }, {
                    field: 'monthSalesKanban',
                    title: '销量（万辆）',
                    align: 'center',
                    templet: function (d) {
                        var text = d.monthSalesKanban;
                        return '<div title="' + text + '"><span>' + text + '</span></div>'
                    }
                },
                {
                    field: 'proportion',
                    title: '合同占比',
                    align: 'center',
                    width:"20%",
                    templet: function (d) {
                        var text = d.proportion;
                        return '<div title="' + text + '"><span>' + text + '%' + '</span></div>'
                    }
                }]
        ];
        showTableP4('automobileP4', '/api/carsales/carSales/carSalesRanking', automobileClos, tables4Height2)
        // 部门收款排行榜
        var departmentClos = [
            [
                {
                    type: 'numbers', title: '排行'
                },
                {
                    field: 'departmentName',
                    title: '部门',
                    width: '30%',
                    align: 'center',
                    templet: function (d) {
                        var text = d.departmentName;
                        return text
                    }
                }, {
                    field: 'amountReceivable',
                    title: '应收余额（万元）',
                    width: '30%',
                    align: 'center',
                    templet: function (d) {
                        var text = d.amountReceivable;
                        return text
                    }
                },
                {
                    field: 'totalAmountReceivable',
                    title: '占比',
                    align: 'center',
                    templet: function (d) {
                        var text = toPercentP4(d.amountReceivable, d.totalAmountReceivable)
                        return text
                    }
                }]
        ];
        showTableP4('departmentP4', '/api/industymeeting/receivableIncome/accountReceivableByDepart?topNum=' + 10, departmentClos, tables4Height)
        // 企业收款
        var proceedsClos = [[
            {
                type: 'numbers', title: '排行'
            },
            {
                field: 'corpname',
                title: '企业',
                width: '50%',
                align: 'center',
                templet: function (d) {
                    var text = d.corpname;
                    return '<div title="' + text + '"><span>' + text + '</span></div>'
                }
            }, {
                field: 'amountReceivableStr',
                title: '应收余额（万元）',
                align: 'center',
                templet: function (d) {
                    var text = d.amountReceivableStr;
                    return '<div title="' + text + '"><span>' + text + '</span></div>'
                }
            },
        ]];
        showTableP4('proceedsP4', '/api/industymeeting/receivableIncome/accountReceivableByEnterprise?topNum=' + 10, proceedsClos, tables4Height)
        // 请求数据
        function showTableP4(tableId, api, cols, THeight) {
            table.render({
                elem: '#' + tableId,
                id: tableId,
                url: admin.formatUrl(api),
                parseData: function (res) {
                    return {
                        "code": res.respCode, //解析接口状态
                        "msg": res.message, //解析提示文本
                        // "count": res.data.count, //解析数据长度
                        "data": res.data //解析数据列表
                    };
                },
                cols: cols,
                height: THeight,
                // where: {
                // }
            });
        }
        function toPercentP4(num, total) {
            var datas = '';
            if (num == 0 && total == 0) {
                datas = 0 + '%';
            } else if (num == 0 && total != 0) {
                datas = 0 + '%';
            } else if (num != 0 && total == 0) {
                datas = 100 + '%';
            } else {
                datas = (Math.round(num / total * 10000) / 100.00 + "%");
            }
            return datas;
        }
    })
</script>